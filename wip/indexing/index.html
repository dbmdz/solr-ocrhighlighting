
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../installation/">
      
      
        <link rel="next" href="../alternatives/">
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.4.7">
    
    
      
        <title>Indexing - Solr OCR Highlighting Plugin</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.4b4a2bd9.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#indexing-ocr-documents" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
      </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Solr OCR Highlighting Plugin" class="md-header__button md-logo" aria-label="Solr OCR Highlighting Plugin" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Solr OCR Highlighting Plugin
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Indexing
            
          </span>
        </div>
      </div>
    </div>
    
    
    
    
      <div class="md-header__source">
        <a href="https://github.com/dbmdz/solr-ocrhighlighting/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Solr OCR Highlighting Plugin" class="md-nav__button md-logo" aria-label="Solr OCR Highlighting Plugin" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    Solr OCR Highlighting Plugin
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/dbmdz/solr-ocrhighlighting/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Introduction
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../installation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Installation
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Indexing
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Indexing
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#one-file-per-solr-document-11" class="md-nav__link">
    One file per Solr document (1:1)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#multiple-files-per-solr-document-n1" class="md-nav__link">
    Multiple files per Solr document (n:1)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#advanced-one-or-more-partial-files-per-solr-document" class="md-nav__link">
    Advanced: One or more partial files per Solr document
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../alternatives/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Indexing Alternative Terms
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../query/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Querying
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../example/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Example Setup
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../performance/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Performance Tuning
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../formats/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Supported Formats
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../changes/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Change Log
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#one-file-per-solr-document-11" class="md-nav__link">
    One file per Solr document (1:1)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#multiple-files-per-solr-document-n1" class="md-nav__link">
    Multiple files per Solr document (n:1)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#advanced-one-or-more-partial-files-per-solr-document" class="md-nav__link">
    Advanced: One or more partial files per Solr document
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<h1 id="indexing-ocr-documents">Indexing OCR documents</h1>
<div class="admonition note">
<p class="admonition-title">If you want to store the OCR in the index itself you can all but <em>skip this section</em></p>
<p>Just put the OCR content in the field and submit it to Solr for indexing. We recommend using the space-efficient
<a href="../formats/#miniocr">MiniOCR format</a> if you decide to go this way.</p>
</div>
<p>Indexing OCR documents without storing the actual content in the index is relatively simple:
When building the index document, instead of putting  the actual OCR content into the field, you use
a <strong>source pointer</strong>. This pointer will tell the plugin from which location to load the OCR content
during indexing and highlighting.</p>
<p>The advantage of this approach is a <em>significant</em> reduction in the amount of memory required for both the client
and the Solr server, since neither of them has to keep the (potentially very large) OCR document in memory at
any time. The client just has a very short pointer, and the plugin will load the contents <em>lazily</em>. Additionally,
the index size is kept comparatively small, since Solr only needs to store the locations of the contents and not
the (again, potentially very large) contents themselves in the index.</p>
<div class="admonition note">
<p class="admonition-title">Performance</p>
<p>When using external files for highlighting, the performance depends to a large degree on
how fast the underlying storage is able to perform random I/O. This is why <strong>we highly recommend
using flash storage for the documents</strong>.</p>
<p>Another option to increase highlighting performance is
to <strong>switch from UTF8 to ASCII</strong> (with XML-escaped Unicode codepoints) for the encoding of the OCR
files. This requires less CPU during decoding, since we don't have to take multi-byte sequences into
account. To signal to the plugin that a given source path is encoded in ASCII, include the <code>{ascii}</code>
string after the path, e.g. <code>/mnt/data/ocrdoc.xml{ascii}[31337:41337]</code>.</p>
<p>For even more advice on performance tuning, refer to the <a href="../performance/">corresponding documentation section</a>.</p>
</div>
<p>The structure of the source pointers depends on how your actual OCR files on disk map to documents in the Solr
index.</p>
<div class="admonition caution">
<p class="admonition-title">Encoding</p>
<p>The files pointed at by the source pointers <strong>need to be UTF-8 or ASCII encoded</strong>. Other encodings will lead
to unexpected errors and weird behaviour, so make sure the files are in the correct encoding before you
index them.</p>
</div>
<h2 id="one-file-per-solr-document-11">One file per Solr document (<code>1:1</code>)</h2>
<p>This is the simplest case: The contents of the OCR field in a Solr document correspond exactly to the contents
of a single OCR file on disk. The source pointer is simply <strong>the path to the file</strong>:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="err">POST</span><span class="w"> </span><span class="err">h</span><span class="kc">tt</span><span class="err">p</span><span class="p">:</span><span class="c1">//solrhost:8983/solr/corename/update</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="p">{</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="w">    </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ocrdoc-1&quot;</span><span class="p">,</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="w">    </span><span class="nt">&quot;ocr_text&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;/mnt/data/ocrdoc-1.xml&quot;</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="p">}</span>
</code></pre></div>
<p>That's it, during indexing and highlighting Solr will use the OCR file at <code>/mnt/data/ocrdoc-1.xml</code> to get the
text for indexing and highlighting.</p>
<h2 id="multiple-files-per-solr-document-n1">Multiple files per Solr document (<code>n:1</code>)</h2>
<p>Frequently the OCR text for a single document (e.g. a book) is stored in one file per page in the document.
So, if we want our search results to be these documents and not individual pages from them, we need to
instruct the plugin to load the OCR content from multiple files.</p>
<p>In this case, the source pointer is the <strong>list of all file paths, joined with the <code>+</code> character</strong>:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="err">POST</span><span class="w"> </span><span class="err">h</span><span class="kc">tt</span><span class="err">p</span><span class="p">:</span><span class="c1">//solrhost:8983/solr/corename/update</span>
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="p">{</span>
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a><span class="w">    </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ocrdoc-1&quot;</span><span class="p">,</span>
<a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a><span class="w">    </span><span class="nt">&quot;ocr_text&quot;</span><span class="p">:</span><span class="w"> </span><span class="err">&quot;/mnt/data/ocrdoc-1_1.xml+/mnt/data/ocrdoc-1_2.xml+/mnt/data/ocrdoc-1_3.xml</span>
<a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a><span class="err">}</span>
</code></pre></div>
<p>For indexing and highlighting, Solr will load the contents of the <code>ocrdoc-1_1.xml</code>, <code>ocrdoc-1_2.xml</code> and 
<code>ocrdoc-1_2.xml</code> as a single continuous text.</p>
<h2 id="advanced-one-or-more-partial-files-per-solr-document">Advanced: One or more <em>partial</em> files per Solr document</h2>
<p>A more complicated situation arises if the Solr documents need to refer to <em>parts</em> of one or more files on
disk. This happens for example when you have scans of bound newspaper volumes, which frequently consist
of more than 1000 pages. For search purposes, you want to map <em>single articles</em> from issues in this newspaper
volume to single Solr documents.</p>
<p>If the volume OCR is stored as one file per page, these articles can span multiple files, often in a
non-contiguous manner, so you need to refer to <em>regions</em> of these files.</p>
<p>For these cases, the source pointer can include <strong>one or more byte regions per file</strong>:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="err">POST</span><span class="w"> </span><span class="err">h</span><span class="kc">tt</span><span class="err">p</span><span class="p">:</span><span class="c1">//solrhost:8983/solr/corename/update</span>
<a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a><span class="p">[</span>
<a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a><span class="w">  </span><span class="p">{</span>
<a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a><span class="w">    </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;article_1863-03-14_8&quot;</span><span class="p">,</span>
<a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a><span class="w">    </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Contiguous article on a single page&quot;</span><span class="p">,</span>
<a id="__codelineno-2-6" name="__codelineno-2-6" href="#__codelineno-2-6"></a><span class="w">    </span><span class="nt">&quot;ocr_text&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;/mnt/data/1863_185[216343:331347]&quot;</span>
<a id="__codelineno-2-7" name="__codelineno-2-7" href="#__codelineno-2-7"></a><span class="w">  </span><span class="p">},</span>
<a id="__codelineno-2-8" name="__codelineno-2-8" href="#__codelineno-2-8"></a><span class="w">  </span><span class="p">{</span>
<a id="__codelineno-2-9" name="__codelineno-2-9" href="#__codelineno-2-9"></a><span class="w">    </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;article_1863-03-15_12&quot;</span><span class="p">,</span>
<a id="__codelineno-2-10" name="__codelineno-2-10" href="#__codelineno-2-10"></a><span class="w">    </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Article spanning from the end of one file to the first part of a second file&quot;</span><span class="p">,</span>
<a id="__codelineno-2-11" name="__codelineno-2-11" href="#__codelineno-2-11"></a><span class="w">    </span><span class="nt">&quot;ocr_text&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;/mnt/data/1863_187.xml[76306:]+/mnt/data/1863_188.xml[:196896]&quot;</span>
<a id="__codelineno-2-12" name="__codelineno-2-12" href="#__codelineno-2-12"></a><span class="w">  </span><span class="p">},</span>
<a id="__codelineno-2-13" name="__codelineno-2-13" href="#__codelineno-2-13"></a><span class="w">  </span><span class="p">{</span>
<a id="__codelineno-2-14" name="__codelineno-2-14" href="#__codelineno-2-14"></a><span class="w">    </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;article_1863-03-16_2&quot;</span><span class="p">,</span>
<a id="__codelineno-2-15" name="__codelineno-2-15" href="#__codelineno-2-15"></a><span class="w">    </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Article split between two pages, with the content on the first page split by an advertisement.&quot;</span><span class="p">,</span>
<a id="__codelineno-2-16" name="__codelineno-2-16" href="#__codelineno-2-16"></a><span class="w">    </span><span class="nt">&quot;ocr_text&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;/mnt/data/1863_191.xml[1578:8937,12478:17621]+/mnt/data/1863_192.xml[837:28432]&quot;</span>
<a id="__codelineno-2-17" name="__codelineno-2-17" href="#__codelineno-2-17"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-2-18" name="__codelineno-2-18" href="#__codelineno-2-18"></a><span class="p">]</span>
</code></pre></div>
<p>As before, we concatenate multiple file paths with the <code>+</code> character. The source regions for each file are
listed as <strong>comma-separated byte-regions</strong> inside of square brackets.</p>
<p>The format of the regions is inspired by <a href="https://docs.python.org/3/reference/expressions.html#slicings">Python's slicing syntax</a> and can take these forms:</p>
<ul>
<li><code>start:</code> → Everything from byte offset <code>start</code> to the end of the file</li>
<li><code>start:end</code> → Everything between the byte offsets <code>start</code> (inclusive) and <code>end</code> (exclusive)</li>
<li><code>:end</code> → Everything from the start of the file to byte offset <code>end</code> (exclusive)</li>
</ul>
<div class="admonition caution">
<p class="admonition-title">Region Requirements</p>
<ul>
<li>The concatenated content of your regions must be a half-way valid XML structure. While we
  tolerate <em>unclosed tags or unmatched closing tags</em> (they often can't be avoided), other
  errors such as partial tags (i.e. a missing <code>&lt;</code> or <code>&gt;</code>) will lead  to an error during indexing.</li>
<li>To get correct page numbers in your responses, make sure that you include any and all page
  openings for your content in the set of regions. For example, if your document is an article
  that spans from the bottom of one page to the top of the next, you will have to include a region
  for the opening element of the first page so we can determine the page for the first part of the
  article during highlighting</li>
</ul>
</div>
<div class="admonition caution">
<p class="admonition-title">Byte Offsets</p>
<p>The region offsets are expected as <strong>byte offsets</strong>. Take care that the start and end of each region
fall on the start of a valid unicode byte sequence, and not in the middle of a multi-byte sequence.
Care needs to be taken when determining the offsets, since obtaining byte offsets for UTF8-encoded
text files is difficult in some programming languages (most notoriously Java, use the
<a href="https://github.com/nishihatapalmer/byteseek"><code>net.byteseek:byteseek</code></a> package)</p>
</div>
<div class="admonition note">
<p class="admonition-title">Example Implementation</p>
<p>The <a href="https://github.com/dbmdz/solr-ocrhighlighting/tree/master/example">example setup on GitHub</a>
uses a <a href="https://github.com/dbmdz/solr-ocrhighlighting/blob/master/example/ingest.py">Python script</a>
to index articles from multi-page newspaper scans into Solr. It works by <a href="https://github.com/dbmdz/solr-ocrhighlighting/blob/master/example/ingest.py#L141-L147">first extracting the OCR
block ids for each article from a METS file</a>
and then <a href="https://github.com/dbmdz/solr-ocrhighlighting/blob/master/example/ingest.py#L108-L123">finds the byte regions these OCR blocks are located in</a>
to build the source pointer for each article.</p>
</div>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "..", "features": [], "search": "../assets/javascripts/workers/search.f886a092.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"provider": "mike"}}</script>
    
    
      <script src="../assets/javascripts/bundle.aecac24b.min.js"></script>
      
    
  </body>
</html>